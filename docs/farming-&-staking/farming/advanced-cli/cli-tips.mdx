---
title: Tips & Tricks
sidebar_position: 3
description: How to run an Autonomys Network Farmer with the Substrate CLI
slug: /farming/advanced-cli/tips
keywords:
    - Farmer
    - Farming
    - CLI
    - Binaries
    - Docker
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Link from '@docusaurus/Link';
import MDXComponents from '@theme-original/MDXComponents';
import Button from '@site/src/components/Button';

Whether you are an experienced farmer or new to the Autonomys Network, this section offers valuable insights to improve your experience and efficiency. We explore practical advice and hidden techniques that will help you optimize your farming setup and tackle common challenges effortlessly.

These tips are specifically designed to ensure your farm runs smoothly and effectively. Let’s get started!

## Telemetry & Explorers

Explore the Autonomys Network in detail with our telemetry tool and various block explorers. Whether you're monitoring network activity or analyzing blockchain data, these resources provide valuable insights into the network's performance and transactions.

<details>
<summary><small>Monitor the Autonomys Network using telemetry and block explorers.</small></summary>

<div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>
    <div style={{ flexBasis: '25%', flexShrink: 0, display: 'flex', justifyContent: 'center' }}>
        <Button label="Telemetry Server" link="https://telemetry.subspace.network"/>
    </div>
    <p style={{ flexBasis: '75%', margin: '0' }}>
        Get real-time insights into network activity and performance metrics. Ideal for monitoring the overall health and status of the Autonomys Network.
    </p>
</div>

<div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>
    <div style={{ flexBasis: '25%', flexShrink: 0, display: 'flex', justifyContent: 'center' }}>
        <Button label="✨ Astral Block Explorer" link="https://astral.autonomys.xyz"/>
    </div>
    <p style={{ flexBasis: '75%', margin: '0' }}>
        Our primary tool for viewing blocks, transactions, and network activity on the Autonomys Network. This explorer offers an intuitive interface and detailed information.
    </p>
</div>

<div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>
    <div style={{ flexBasis: '25%', flexShrink: 0, display: 'flex', justifyContent: 'center' }}>
        <Button label="Subscan Block Explorer" link="https://subspace.subscan.io" variant="secondary"/>
    </div>
    <p style={{ flexBasis: '75%', margin: '0' }}>
        An alternative block explorer providing detailed views of blocks, transactions, and network events. Subscan is known for its user-friendly interface and additional data analytics features.
    </p>
</div>

<div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>
    <div style={{ flexBasis: '25%', flexShrink: 0, display: 'flex', justifyContent: 'center' }}>
        <Button label="polkadot{.js}" link="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frpc-0.gemini-3h.subspace.network%2Fws#/explorer" variant="secondary"/>
    </div>
    <p style={{ flexBasis: '75%', margin: '0' }}>
        For users familiar with the Polkadot ecosystem, this explorer offers a seamless experience for exploring the Autonomys Network using the Polkadot.js interface.
    </p>
</div>

</details>

## Useful Parameters

:::tip Available Parameters

A complete list of parameters and their functions can be obtained using the `--help` option with both `subspace-node` and `subspace-farmer`.

:::

<Tabs queryString="component">


<TabItem value="node" label="Node" default>

<details>
<summary><small>DSN Syncing</small></summary>

:::caution Adjusting DSN Sync Parameters

It may be tempting to modify certain parameters that appear to be related to DSN syncing, but caution is advised. Some options may not improve syncing performance and should be left at their default settings.

:::

:::tip Understanding the DSN

The DSN can be a complex topic. To gain a better understanding of our Decentralized Storage Network, please refer to this [guide](https://academy.autonomys.xyz/subspace-protocol/network-architecture/distributed-storage-network) from our Academy.

:::

```bash
--dsn-out-connections <value>
--dsn-pending-out-connections <value>
```

</details>

<details>
<summary><small>Snap Sync</small></summary>

Snap Sync works by jumping to near the end of the chain, allowing you to sync with the current block more quickly. Once the initial jump is complete, it functions like a full sync. In fact, if you haven't synced for more than a few days, it might be faster to remove the node database and let Snap Sync quickly sync to the most recent block.

A full sync is required for situations where you need an archival node, such as running an operator or when running an RPC node for public use or indexing. Archival nodes store the entire blockchain, unlike pruned nodes that only store recent data. To perform a full sync and disable Snap Sync, use the following command:

```bash
--sync full
```

</details>

<details>
<summary><small>Wipe</small></summary>

If you switch to a new network, you will need to wipe your existing data to be compatible with the new network.

To wipe your node, use the following command, replacing `subspace-node` with the name of the node file you downloaded from [releases](https://github.com/autonomys/subspace/releases):

```bash
./subspace-node wipe /path/to/node
```

</details>

</TabItem>


<TabItem value="farmer" label="Farmer">

<details>
<summary><small>Benchmarking</small></summary>

Benchmarking helps you test the plotting speed of your farmer. To perform a benchmark audit, use the following command:

```bash
./subspace-farmer benchmark audit /path/to/plot
```

Replace `/path/to/plot` with the actual path to your plot. This command will provide metrics and insights regarding your plotting performance.

To interpret the results, assess throughput to determine the maximum auditable size across any number of disks, as both CPU and disk performance influence this metric.

<p><small>***To read more about prove audit benchmarking, refer to this [forum post](https://forum.autonomys.xyz/t/2149).***</small></p>

There is also a second command available to determine how much time your farmer has after auditing to provide proof:

```bash
./subspace-farmer benchmark prove /path/to/plot
```

Each farmer has approximately four seconds to audit and prove, so depending on the speed of auditing, the remaining time will be allocated for proving. Note that proving performance does not depend on plot size.

If there isn’t enough time for the proving step, the farmer logs a message like this:

```
Proving for solution skipped due to farming time limit slot=<slot> sector_index=<index>
```

<p><small>***To read more about prove benchmarking, refer to this [forum post](https://forum.autonomys.xyz/t/2150).***</small></p>

</details>

<details>
<summary><small>Create Missing Farms</small></summary>

A farmer can choose whether the system should automatically create missing farms at startup. If you specify a path to a plot that doesn't exist, the system will generate a new one. However, this may lead to issues if a drive fails to mount correctly. By default, this option is enabled, but you can disable it using the following flag:

```bash
--create false
```

Setting this option to false after your plots are initially created helps prevent accidental file writes to an incorrect drive.

</details>

<details>
<summary><small>Record Chunks Mode</small></summary>

Upon startup, each farm benchmarks the performance of every plot to identify the most efficient proving method, yielding either `ConcurrentChunks` or `WholeSector` results. If you already know the optimal method for your setup, you can specify it as an argument for each farm to save time during benchmarking.

For example, you can set `record-chunks-mode` after defining the path and size, assigning the desired value:

```bash
path=/mnt/plots/drive1,size=4TB,record-chunks-mode=ConcurrentChunks
```

If you do not provide this parameter, the system will benchmark each disk at startup to determine the most efficient method.

</details>

<details>
<summary><small>DSN Syncing</small></summary>

:::caution[Adjusting DSN Sync Parameters]

It may be tempting to modify certain parameters that appear to be related to DSN syncing, but caution is advised. Some options may not improve syncing performance and should be left at their default settings.

:::

:::tip[Understanding the DSN]

The DSN can be a complex topic. To gain a better understanding of our Decentralized Storage Network, please refer to this [guide](https://academy.autonomys.xyz/subspace-protocol/network-architecture/distributed-storage-network) from our Academy.

:::

The default parameters are configured with common consumer modem and router capabilities in mind. Adjusting certain parameters can enhance DSN sync performance by increasing parallelism. However, if you choose to significantly increase these values, ensure that your modem or router can handle the additional traffic.

Increasing the values of the farmer parameters may enhance plotting speed by accelerating piece cache download speeds.

```bash
--out-connections <value>
--pending-out-connections <value>
```

</details>

<details>
<summary><small>Record Encoding Concurrency</small></summary>

Plotting performance has been improved with increased internal concurrency. During plotting, table generation involves both parallel and sequential phases. By generating multiple tables at once, we overlap sequential tasks with parallel ones, improving CPU utilization. Although generating tables for all records demands significant RAM, processing fewer records at a time helps balance CPU and RAM usage.

The `--cpu-record-encoding-concurrency` option allows you to fine-tune this balance. By default, it allocates one record for every two cores, up to eight in parallel. If RAM usage becomes too high or you prefer the previous method, you can adjust this setting.

Example usage:

```bash
--cpu-record-encoding-concurrency 4
```

You can experiment to optimize performance based on your system's CPU and RAM.

</details>

<details>
<summary><small>Scrub</small></summary>

In certain situations, when the farmer terminates unexpectedly or encounters an error, it may fail to restart correctly. The scrub command helps resolve these issues by cleaning or resetting the specified plot.

```bash
./subspace-farmer scrub /path/to/plot
```

Ensure you replace `/path/to/plot` with the actual path to your plot. Use this command with caution, as it modifies the plot state to recover from errors.

</details>

<details>
<summary><small>Specify CPU Cores</small></summary>

This option allows you to override any custom logic that subspace-farmer uses for CPU core allocation. You can specify the plotting CPU cores by adding `--cpu-plotting-cores`, followed by the desired core parameters. Cores should be listed as comma-separated values, using whitespace to separate different thread pools or encoding instances. 

For example, the command:

```bash
--cpu-plotting-cores 0,1 2,3
```

will result in two sectors being encoded simultaneously, with each sector using a pair of CPU cores.

You can similarly customize the replotting CPU cores with the `--cpu-replotting-cores` option, using arguments that follow the same format as `--cpu-plotting-cores`.

It is important to note that if you set `--cpu-plotting-cores`, you must configure `--cpu-replotting-cores` with the same number of CPU core groups. If you omit the `--cpu-replotting-cores` setting, the node will default to using the same thread pool as for plotting.

</details>

<details>
<summary><small>Utilizing Multiple Drives</small></summary>

You can farm to multiple drives with a single instance of the farmer. This allows for greater storage capacity and increased rewards.

This example specifies the paths and sizes of multiple plots across different drives:

```bash
./subspace-farmer farm --reward-address <wallet address> \
    path=/mnt/plots/drive1,size=900GiB \
    path=/mnt/plots/drive2,size=8T \
    path=/mnt/plots/drive3,size=8T
```

</details>

<details>
<summary><small>Wipe</small></summary>

If you switch to a new network, you will need to wipe your existing data to be compatible with the new network.

To wipe your farm, use the following command, replacing `subspace-farmer` with the name of the farmer file you downloaded from [releases](https://github.com/autonomys/subspace/releases):

```bash
./subspace-farmer wipe /path/to/farm
```

</details>

</TabItem>


<TabItem value="docker" label="Docker">

<details>
<summary><small>Wipe</small></summary>

If you switch to a new network, you will need to wipe your existing data to ensure compatibility with the new network.

In the case of a Docker setup, run the following command to stop and remove the containers, along with the associated volumes:

```bash
docker compose down -v
```

Make sure to manually delete any custom directories if you specified them.

</details>


</TabItem>

</Tabs>

---

## Advanced Error Logging

<details id="rust-backtrace">
<summary><small>Enable Rust Backtrace</small></summary>

When operating the Subspace Farmer and Node, you may come across an error message prompting you to enable a Rust backtrace for issue diagnosis:

```bash
Backtrace omitted. Run with RUST_BACKTRACE=1 environment variable to display it.
```

This message indicates that Rust, the programming language utilized by the Subspace Farmer and Node, has encountered a problem. By default, the backtrace is not shown. To activate the `RUST_BACKTRACE` environment variable and access detailed error information, use the following commands according to your operating system:

<Tabs groupId="OS">

<TabItem value="linux" label="🐧 Ubuntu" default>

To enable the Rust backtrace in the Ubuntu terminal, type the following command and then rerun the application:

```bash
export RUST_BACKTRACE=1
```


</TabItem>

<TabItem value="windows" label="🪟 Windows">

To enable the Rust backtrace in PowerShell, enter the following command and then rerun the application:

```powershell
$Env:RUST_BACKTRACE=1
```

</TabItem>

<TabItem value="macos" label="🍎 macOS">

To enable the Rust backtrace in the macOS terminal, type the following command and then rerun the application:

```bash
export RUST_BACKTRACE=1
```

</TabItem>

<TabItem value="systemd_service" label="🤖 Linux Service (SystemD)">

For services, use the following commands to enable the Rust backtrace:

1. Edit the service file for the node or farmer:

```bash
sudo systemctl edit subspace-node
```

or 

```bash
sudo systemctl edit subspace-farmer
```

2. Add the `[Service]` section and include the line `Environment=RUST_BACKTRACE=1` between the warning comments.

3. Reload the systemd manager configuration:

```bash
sudo systemctl daemon-reload
```

4. Restart the services:

```bash
sudo systemctl restart subspace-{node,farmer}
```

</TabItem>

</Tabs>

Enabling `RUST_BACKTRACE` provides additional diagnostic information that can assist in resolving any errors encountered during operation. This information can be shared with the development or support team for further analysis.

</details>

## Operating System Changes

<details id="open-files-limit">
<summary><small>Changing the Open Files Limit on Linux</small></summary>

Adjusting the open files limit on Linux is sometimes necessary to optimize both system and application performance. Applications that manage file sharing or distribution, such as peer-to-peer systems, may need to open many connections to different peers simultaneously. Increasing the open files limit enables these applications to maintain more connections, thereby enhancing data transfer rates and overall system efficiency.

This adjustment can also help prevent the `Too Many Open Files` error.

To temporarily change the limit for open files, you can use the `ulimit` command. For example, to set the limit to 2048, you would run:

```bash
ulimit -n 2048
```

Keep in mind that this change will revert after logging out or rebooting.

For a permanent adjustment, you have two options:

1. Modify the kernel parameter `fs.file-max` using the `sysctl` command:

```bash
sysctl -w fs.file-max=500000
```

2. Set limits for individual users by editing the `/etc/security/limits.conf` file. You can specify hard and soft limits for the number of open files. For instance:

```bash
username soft nofile 10000
username hard nofile 30000
```

By applying these changes, you can effectively manage the open files limit to optimize your system’s performance.

</details>